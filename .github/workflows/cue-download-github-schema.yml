# Generated by cue/workflows_tool.cue; do not edit
name: Create PR with latest GitHub schema
"on":
  workflow_dispatch: {}
jobs:
  cue_fmt_check:
    name: CUE formatting check
    permissions:
      contents: write
      pull-requests: write
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@2541b1294d2704b0964813337f33b291d3f8596b
      - name: Setup CUE environment
        uses: cue-lang/setup-cue@143c2fe537047bf8c7ead6a30784ad1802e9d991
        with:
          version: v0.4.3
      - name: Download GitHub schema
        run: curl https://raw.githubusercontent.com/SchemaStore/schemastore/6fe4707b9d1c5d45cfc8d5b6d56968e65d2bdc38/src/schemas/json/github-workflow.json --output gh-workflows-schema.json
        working-directory: .github/cue/cue.mod/pkg/json.schemastore.org/github
      - name: Import GitHub schema with CUE
        run: 'cue import --force --package json --path ''#workflow:'' --outfile github-workflow.cue jsonschema: gh-workflows-schema.json'
        working-directory: .github/cue/cue.mod/pkg/json.schemastore.org/github
      - name: Create pull request
        uses: peter-evans/create-pull-request@331d02c7e2104af23ad5974d4d5cbc58a3e6dc77
        with:
          add-paths: .github/cue/cue.mod/pkg/json.schemastore.org/github/github-workflow.cue
          commit-message: Update...
          title: Update...
          delete-branch: true
          labels: cue,enhancement
      - name: Check commit is clean
        run: test -z "$(git status --porcelain)" || (git status; git diff; false)
permissions:
  contents: read
