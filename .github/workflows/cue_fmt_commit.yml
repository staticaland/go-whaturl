# Generated by CUE from ../cue/workflows_tool.cue; do not edit

name: CUE formatting check and commit
"on":
  pull_request:
    paths:
      - '**.cue'
      - '**.yml'
jobs:
  cue_fmt_check:
    name: CUE formatting check and commit
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@2541b1294d2704b0964813337f33b291d3f8596b
      - name: Setup CUE environment
        uses: cue-lang/setup-cue@143c2fe537047bf8c7ead6a30784ad1802e9d991
        with:
          version: v0.4.3
      - name: Check formatting
        run: cue fmt -s
        working-directory: .github/cue
      - id: git-check
        name: Check for modified files
        run: echo ::set-output name=modified::$(if git diff-index --quiet HEAD --; then echo "false"; else echo "true"; fi)
      - if: steps.git-check.outputs.modified == 'true'
        name: Push changes
        run: |-
          git config --global user.name 'Anders K. Pettersen'
          git config --global user.email 'staticaland@users.noreply.github.com'

          git commit -am "style: Automated changes"

          git remote set-url origin https://x-access-token:${{ secrets.GITHUB_TOKEN }}@github.com/${{ github.repository }}
          git push
